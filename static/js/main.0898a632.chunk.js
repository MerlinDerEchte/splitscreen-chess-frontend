(this["webpackJsonpsplitscreen-chess"]=this["webpackJsonpsplitscreen-chess"]||[]).push([[0],{116:function(e,t,n){},117:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var i=n(1),o=n(19),s=n(32),r=n.n(s),c=(n(70),n(43)),a=n(3),l=(n(71),n(4)),u=(n(72),n(73),n(38)),d=n.n(u),h=Object.freeze({BLACK:"BLACK",WHITE:"WHITE"}),v=n(0);var j=function(e){var t;return Object(v.jsx)("div",{id:"settings-overlay",onClick:function(t){var n;(null===(n=e.Board)||void 0===n?void 0:n.turn)&&(t.preventDefault(),e.setShowSettingsOverlay(!1))},children:Object(v.jsxs)("div",{id:"settings-main",onClick:function(e){e.stopPropagation()},children:[Object(v.jsx)("h2",{children:Object(v.jsx)("span",{children:"Settings"})}),e.firstBoard===h.WHITE?Object(v.jsxs)("div",{className:e.screenWidth>1e3?"settings-item settings-item-horizontal":"settings-item settings-item-vertical",children:[Object(v.jsx)("div",{className:"white-container",children:"White"}),Object(v.jsx)("div",{className:"settings-item-icon",onClick:e.toggleFirstBoard,children:Object(v.jsx)(d.a,{})}),Object(v.jsx)("div",{className:"black-container",children:"Black"})]}):Object(v.jsxs)("div",{className:e.screenWidth>1e3?"settings-item settings-item-horizontal":"settings-item settings-item-vertical",children:[Object(v.jsx)("div",{className:"black-container",children:"Black"}),Object(v.jsx)("div",{className:"settings-item-icon",onClick:e.toggleFirstBoard,children:Object(v.jsx)(d.a,{})}),Object(v.jsx)("div",{className:"white-container",children:"White"})]}),Object(v.jsxs)("div",{className:e.screenWidth>1e3?"settings-item settings-item-horizontal":"settings-item settings-item-vertical",children:[Object(v.jsx)("button",{onClick:e.initGame,children:"New game"}),(null===(t=e.Board)||void 0===t?void 0:t.turn)?Object(v.jsx)("button",{onClick:function(){return e.setShowSettingsOverlay(!1)},children:"Close settings"}):""]})]})})},g=n(39),f=n.n(g),p=n(60),b=(n(80),Object.freeze({BISHOP:"BISHOP",KING:"KING",KNIGHT:"KNIGHT",PAWN:"PAWN",QUEEN:"QUEEN",ROOK:"ROOK"})),O=Object.freeze({BLACK:"BLACK",WHITE:"WHITE"}),P=Object.freeze({BISHOP:"BISHOP",KING:"KING",KNIGHT:"KNIGHT",PAWN:"PAWN",QUEEN:"QUEEN",ROOK:"ROOK"});var m=function(e,t){if(e&&t){var n=function(e,t){switch(e){case O.WHITE:switch(t){case P.BISHOP:return"/splitscreen-chess-frontend/images/whiteBishop.svg";case P.KING:return"/splitscreen-chess-frontend/images/whiteKing.svg";case P.KNIGHT:return"/splitscreen-chess-frontend/images/whiteKnight.svg";case P.PAWN:return"/splitscreen-chess-frontend/images/whitePawn.svg";case P.QUEEN:return"/splitscreen-chess-frontend/images/whiteQueen.svg";case P.ROOK:return"/splitscreen-chess-frontend/images/whiteRook.svg";default:return""}break;case O.BLACK:switch(t){case P.BISHOP:return"/splitscreen-chess-frontend/images/blackBishop.svg";case P.KING:return"/splitscreen-chess-frontend/images/blackKing.svg";case P.KNIGHT:return"/splitscreen-chess-frontend/images/blackKnight.svg";case P.PAWN:return"/splitscreen-chess-frontend/images/blackPawn.svg";case P.QUEEN:return"/splitscreen-chess-frontend/images/blackQueen.svg";case P.ROOK:return"/splitscreen-chess-frontend/images/blackRook.svg";default:return""}break;default:return""}}(t,e);return Object(v.jsx)("img",{alt:"",src:n,draggable:"false"})}};var y=function(e){var t=e.Board.getPieceByPosition(e.fieldNumber),n=t?m(t.type,t.color):"";return Object(v.jsxs)("div",{className:e.isKingInDanger?"field attacked-king":Math.floor(e.fieldNumber/8)%2===0?e.fieldNumber%2===0?"field black-field":"field white-field":e.fieldNumber%2===0?"field white-field":"field black-field",children:[e.fieldNumber!==e.selectedField||e.playerColor!==e.Board.turn&&!e.rotateColor?e.selectedFieldPossibleTargets&&e.selectedFieldPossibleTargets.includes(e.fieldNumber)&&(e.playerColor===e.Board.turn||e.rotateColor)?Object(v.jsx)("div",{className:"possible-move-field"}):"":Object(v.jsx)("div",{className:"selected-field"}),Object(v.jsx)("div",{id:"".concat(e.playerColor,"-").concat(e.fieldNumber,"-piece-image"),className:t?e.rotateColor===t.color?"piece-container rotated-image":"piece-container":"",children:n})]})};n(81),n(82);var B=function(e){var t=e.Board.turn===h.WHITE?m(b.BISHOP,h.WHITE):m(b.BISHOP,h.BLACK),n=e.Board.turn===h.WHITE?m(b.KNIGHT,h.WHITE):m(b.KNIGHT,h.BLACK),i=e.Board.turn===h.WHITE?m(b.QUEEN,h.WHITE):m(b.QUEEN,h.BLACK),o=e.Board.turn===h.WHITE?m(b.ROOK,h.WHITE):m(b.ROOK,h.BLACK);return e.playerColor===e.Board.turn||e.rotateColor?Object(v.jsx)("div",{className:e.rotateColor===e.Board.turn?"pawn-development-overlay pawn-development-overlay-rotated":"pawn-development-overlay",children:Object(v.jsxs)("div",{className:"selection-container",children:[Object(v.jsx)("div",{className:"selection-item",id:"".concat(e.Board.turn,"-bishop-selection"),children:t}),Object(v.jsx)("div",{className:"selection-item",id:"".concat(e.Board.turn,"-knight-selection"),children:n}),Object(v.jsx)("div",{className:"selection-item",id:"".concat(e.Board.turn,"-queen-selection"),children:i}),Object(v.jsx)("div",{className:"selection-item",id:"".concat(e.Board.turn,"-rook-selection"),children:o})]})}):""},x=(n(83),n(24)),w=n(20),N=n(7),E=function e(t,n,i){Object(N.a)(this,e),this.property=t,this.value=n,this.pieceFilterConditionType=i},C=Object.freeze({EQUAL:"equal",UNEQUAL:"unequal"}),I=n(18),H=function(){function e(t){Object(N.a)(this,e),this.conditions=t}return Object(I.a)(e,[{key:"filter",value:function(e){var t=this;return e.filter((function(e){var n,i=Object(x.a)(t.conditions);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.pieceFilterConditionType===C.EQUAL){if(e[o.property]!==o.value)return!1}else if(e[o.property]===o.value)return!1}}catch(s){i.e(s)}finally{i.f()}return!0}))}}]),e}(),W=function e(t,n,i,o,s){Object(N.a)(this,e),this.piece=t.copy(),this.targetPosition=n,this.removePiece=i,this.otherMovedPiece=o,this.otherTargetPosition=s};var T=function(e,t){if(t.color===h.WHITE){Math.floor(t.getPosition()/8);var n=t.getPosition()%8,i=[];null===e.getPieceByPosition(t.getPosition()+8)&&(i.push(new W(t,t.getPosition()+8)),null===e.getPieceByPosition(t.getPosition()+16)&&!1===t.hasMoved&&i.push(new W(t,t.getPosition()+16)));var o=e.getPieceByPosition(t.getPosition()+7);null!==o&&o.color===h.BLACK&&n>0&&i.push(new W(t,t.getPosition()+7,o));var s=e.getPieceByPosition(t.getPosition()+9);return null!==s&&s.color===h.BLACK&&n<7&&i.push(new W(t,t.getPosition()+9,s)),e.lastMovedPiece&&e.lastMovedPiece.type===b.PAWN&&(0===n?e.lastMovedPiece.color===h.BLACK&&e.lastMovedPiece.getPosition()===t.getPosition()+1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()+16&&i.push(new W(t,t.getPosition()+9,e.lastMovedPiece)):(7===n||e.lastMovedPiece.color===h.BLACK&&e.lastMovedPiece.getPosition()===t.getPosition()+1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()+16&&i.push(new W(t,t.getPosition()+9,e.lastMovedPiece)),e.lastMovedPiece.color===h.BLACK&&e.lastMovedPiece.getPosition()===t.getPosition()-1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()+16&&i.push(new W(t,t.getPosition()+7,e.lastMovedPiece)))),i}if(t.color===h.BLACK){var r=t.getPosition()%8,c=[];null===e.getPieceByPosition(t.getPosition()-8)&&(c.push(new W(t,t.getPosition()-8)),null===e.getPieceByPosition(t.getPosition()-16)&&!1===t.hasMoved&&c.push(new W(t,t.getPosition()-16)));var a=e.getPieceByPosition(t.getPosition()-7);null!==a&&a.color===h.WHITE&&r<7&&c.push(new W(t,t.getPosition()-7,a));var l=e.getPieceByPosition(t.getPosition()-9);return null!==l&&l.color===h.WHITE&&r>0&&c.push(new W(t,t.getPosition()-9,l)),e.lastMovedPiece&&e.lastMovedPiece.type===b.PAWN&&(0===r?e.lastMovedPiece.color===h.WHITE&&e.lastMovedPiece.getPosition()===t.getPosition()+1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()-16&&c.push(new W(t,t.getPosition()-7,e.lastMovedPiece)):(7===r||e.lastMovedPiece.color===h.WHITE&&e.lastMovedPiece.getPosition()===t.getPosition()+1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()-16&&c.push(new W(t,t.getPosition()-7,e.lastMovedPiece)),e.lastMovedPiece.color===h.WHITE&&e.lastMovedPiece.getPosition()===t.getPosition()-1&&e.lastMovedPiece.lastPosition===e.lastMovedPiece.getPosition()-16&&c.push(new W(t,t.getPosition()-9,e.lastMovedPiece)))),c}};var K=function(e,t){var n=[],i=Math.floor(t.getPosition()/8),o=t.getPosition()%8;return[[i+1,o+2],[i+2,o+1],[i+1,o-2],[i+2,o-1],[i-1,o+2],[i-2,o+1],[i-1,o-2],[i-2,o-1]].forEach((function(i){if(i[0]>-1&&i[1]>-1&&i[0]<8&&i[1]<8){var o=8*i[0]+i[1],s=e.getPieceByPosition(o);null===s?n.push(new W(t,o)):s.color!==t.color&&n.push(new W(t,o,s))}})),n};var M=function(e,t,n){var i=[],o=Math.floor(t.getPosition()/8),s=t.getPosition()%8;return[[o+1,s+1],[o+1,s+0],[o+1,s-1],[o,s-1],[o,s+1],[o-1,s+1],[o-1,s],[o-1,s-1]].forEach((function(n){if(n[0]>-1&&n[1]>-1&&n[0]<8&&n[1]<8){var o=8*n[0]+n[1],s=e.getPieceByPosition(o);null===s?i.push(new W(t,o)):s.color!==t.color&&i.push(new W(t,o,s))}})),!1===t.hasMoved&&null===e.getPieceByPosition(t.getPosition()-1)&&null===e.getPieceByPosition(t.getPosition()-2)&&null===e.getPieceByPosition(t.getPosition()-3)&&null!==e.getPieceByPosition(t.getPosition()-4)&&e.getPieceByPosition(t.getPosition()-4).type===b.ROOK&&!1===e.getPieceByPosition(t.getPosition()-4).hasMoved&&i.push(new W(t,t.getPosition()-2,null,e.getPieceByPosition(t.getPosition()-4),t.getPosition()-1)),!1===t.hasMoved&&null===e.getPieceByPosition(t.getPosition()+1)&&null===e.getPieceByPosition(t.getPosition()+2)&&null!==e.getPieceByPosition(t.getPosition()+3)&&e.getPieceByPosition(t.getPosition()+3).type===b.ROOK&&!1===e.getPieceByPosition(t.getPosition()+3).hasMoved&&i.push(new W(t,t.getPosition()+2,null,e.getPieceByPosition(t.getPosition()+3),t.getPosition()+1)),i};var k=function(e,t){for(var n=[],i=Math.floor(t.position/8),o=t.position%8,s=!0,r=1;s;r++){var c=o-r,a=8*i+c;if(c>-1&&null===e.getPieceByPosition(a))n.push(new W(t,a));else if(c>-1&&e.getPieceByPosition(a).color!==t.color){var l=e.getPieceByPosition(a);n.push(new W(t,a,l)),s=!1}else s=!1}s=!0;for(var u=1;s;u++){var d=o+u,h=8*i+d;if(d<8&&null===e.getPieceByPosition(h))n.push(new W(t,h));else if(d<8&&e.getPieceByPosition(h).color!==t.color){var v=e.getPieceByPosition(h);n.push(new W(t,h,v)),s=!1}else s=!1}s=!0;for(var j=1;s;j++){var g=i+j,f=8*g+o;if(g<8&&null===e.getPieceByPosition(f))n.push(new W(t,f));else if(g<8&&e.getPieceByPosition(f).color!==t.color){var p=e.getPieceByPosition(f);n.push(new W(t,f,p)),s=!1}else s=!1}s=!0;for(var b=1;s;b++){var O=i-b,P=8*O+o;if(O>-1&&null===e.getPieceByPosition(P))n.push(new W(t,P));else if(O>-1&&e.getPieceByPosition(P).color!==t.color){var m=e.getPieceByPosition(P);n.push(new W(t,P,m)),s=!1}else s=!1}return n};var S=function(e,t){for(var n=[],i=Math.floor(t.getPosition()/8),o=t.getPosition()%8,s=!0,r=1;s;r++){var c=o-r,a=i-r,l=8*a+c,u=e.getPieceByPosition(l);a<8&&a>-1&&c<8&&c>-1&&null===u?n.push(new W(t,l)):a<8&&a>-1&&c<8&&c>-1&&u.color!==t.color?(n.push(new W(t,l,u)),s=!1):s=!1}s=!0;for(var d=1;s;d++){var h=o+d,v=i-d,j=8*v+h,g=e.getPieceByPosition(j);v<8&&v>-1&&h<8&&h>-1&&null===g?n.push(new W(t,j)):v<8&&v>-1&&h<8&&h>-1&&g.color!==t.color?(n.push(new W(t,j,g)),s=!1):s=!1}s=!0;for(var f=1;s;f++){var p=o-f,b=i+f,O=8*b+p,P=e.getPieceByPosition(O);b<8&&b>-1&&p<8&&p>-1&&null===P?n.push(new W(t,O)):b<8&&b>-1&&p<8&&p>-1&&P.color!==t.color?(n.push(new W(t,O,P)),s=!1):s=!1}s=!0;for(var m=1;s;m++){var y=o+m,B=i+m,x=8*B+y,w=e.getPieceByPosition(x);B<8&&B>-1&&y<8&&y>-1&&null===w?n.push(new W(t,x)):B<8&&B>-1&&y<8&&y>-1&&w.color!==t.color?(n.push(new W(t,x,w)),s=!1):s=!1}return n};var A=function(e,t){return[].concat(Object(w.a)(S(e,t)),Object(w.a)(k(e,t)))};var L=function(e,t){return e.type===b.PAWN?T(t,e):e.type===b.BISHOP?S(t,e):e.type===b.KNIGHT?K(t,e):e.type===b.ROOK?k(t,e):e.type===b.QUEEN?A(t,e):e.type===b.KING?M(t,e):[]};var G=function(e){var t=[],n=new E("color",e.turn,C.EQUAL);return new H([n]).filter(e.activePieces).forEach((function(n){t.push.apply(t,Object(w.a)(L(n,e)))})),t};var U=function(e){var t=e.copy();t.switchTurn();var n,i=G(t),o=t.getKing(e.turn),s=Object(x.a)(i);try{for(s.s();!(n=s.n()).done;){if(n.value.targetPosition===o.getPosition())return!0}}catch(r){s.e(r)}finally{s.f()}return!1};var R=function(e){return Object(v.jsx)("div",{className:"game-over-overlay",children:Object(v.jsxs)("div",{className:"game-over-container",children:[Object(v.jsx)("span",{children:" Game Over "}),Object(v.jsx)("span",{children:U(e.Board)?(e.Board.turn===O.WHITE?"Black":"White")+" won":"Remis"})]})})};var Q=function(e,t){var n=[],i=t.piece.copy();if(i.move(t.targetPosition),n.push(i),t.otherMovedPiece){var o=t.otherMovedPiece.copy();o.move(t.otherTargetPosition),n.push(o)}var s=e.copyWithExchangedPieces(n);if(t.removePiece){s.removePiece(t.removePiece);var r=t.removePiece.copy();s.graveyardPieces.push(r)}return s.round=s.round+1,s.lastMovedPiece=i,s.switchTurn(),s};var F=function e(t,n){if(t.piece.type===b.KING&&t.otherMovedPiece){if(U(n))return!1;if(t.targetPosition===t.piece.getPosition()-2)for(var i=1;i<3;i++){if(!e(new W(t.piece,t.piece.getPosition()-i),n))return!1}else if(t.targetPosition===t.piece.getPosition()+2)for(var o=1;o<3;o++){if(!e(new W(t.piece,t.piece.getPosition()+o),n))return!1}}var s,r=Q(n,t),c=G(r),a=r.getKing(n.turn),l=Object(x.a)(c);try{for(l.s();!(s=l.n()).done;){if(s.value.targetPosition===a.getPosition())return!1}}catch(u){l.e(u)}finally{l.f()}return!0};var z=function(e){var t=Object(i.useState)(null),n=Object(a.a)(t,2),o=n[0],s=n[1],r=Object(i.useState)([]),c=Object(a.a)(r,2),l=c[0],u=c[1],d=new Array(64).fill(null),j=U(e.Board),g=e.Board.getKing(e.Board.turn).getPosition();function O(){return new Promise((function(t,n){document.getElementById("".concat(e.Board.turn,"-bishop-selection")).addEventListener("click",(function(){t(b.BISHOP)})),document.getElementById("".concat(e.Board.turn,"-knight-selection")).addEventListener("click",(function(){t(b.KNIGHT)})),document.getElementById("".concat(e.Board.turn,"-queen-selection")).addEventListener("click",(function(){t(b.QUEEN)})),document.getElementById("".concat(e.Board.turn,"-rook-selection")).addEventListener("click",(function(){t(b.ROOK)}))}))}function P(e){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(f.a.mark((function t(n){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.piece.type!==b.PAWN||!(n.targetPosition<8||n.targetPosition>55)){t.next=6;break}return document.getElementsByClassName("pawn-development-overlay")[0].style.display="block",t.next=4,O();case 4:n.piece.type=t.sent,document.getElementsByClassName("pawn-development-overlay")[0].style.display="none";case 6:e.move(n);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function x(){s(null),u([])}function w(t,n){console.log(t),t.stopPropagation(),t.preventDefault(),t.cancelBubble=!0;var i,r=p(t);if(console.log(r),e.Board.turn===e.playerColor||e.rotateColor){console.log("in here");var c=e.Board.getPieceByPosition(r);if(console.log(c),c&&c.color===e.Board.turn){var a=L(c,e.Board);i=a.filter((function(t){return F(t,e.Board)})).map((function(e){return e.targetPosition})),s(r),u(i);var d=document.getElementById("board-".concat(e.playerColor));"mouse"===n&&(d.addEventListener("mousemove",f,!1),d.addEventListener("mouseup",b,!1)),"touch"===n&&(console.log("adding rouch listener"),d.addEventListener("touchmove",f,!1),d.addEventListener("touchend",b,!1))}else if(o||0===o)if(l.includes(r)){var v=e.Board.getPieceByPosition(o),j=L(v,e.Board);console.log(e.Board),console.log(v),console.log(j);var g=j.find((function(e){return e.targetPosition===r}));g?(x(),P(g)):x()}else x();else x()}function f(t){console.log("movepiece",t),t.preventDefault(),t.stopPropagation();var i=document.getElementById("board-".concat(e.playerColor)),o=document.getElementById("".concat(e.playerColor,"-").concat(r,"-piece-image")),s=i.getBoundingClientRect(),c=i.clientWidth/8*1.5,a="mouse"===n?t.clientX:t.changedTouches[0].clientX,l="mouse"===n?t.clientY:t.changedTouches[0].clientY,u=a>s.left?a<s.right?a-c/2:s.right-c/2:s.left-c/2,d=l>s.top?l<s.bottom?l-c/2:s.bottom-c/2:s.top-c/2;o.style.position="fixed",o.style.top="".concat(d,"px"),o.style.left="".concat(u,"px"),o.style.zIndex=200,o.style.height="".concat(c,"px"),o.style.width="".concat(c,"px")}function p(t){var i=document.getElementById("board-".concat(e.playerColor)),o=i.getBoundingClientRect().left,s=i.getBoundingClientRect().top,r=i.getBoundingClientRect().right,c=i.getBoundingClientRect().bottom,a="mouse"===n?t.clientX:t.changedTouches[0].clientX,l="mouse"===n?t.clientY:t.changedTouches[0].clientY,u=r-o,d=c-s;return(e.rotateColor?e.firstBoard===h.WHITE?Math.floor((a-o)/u*8):Math.floor((r-a)/u*8):e.playerColor===h.WHITE?Math.floor((a-o)/u*8):Math.floor((r-a)/u*8))+8*(e.rotateColor?e.firstBoard===h.WHITE?Math.floor((c-l)/d*8):Math.floor((l-s)/d*8):e.playerColor===h.WHITE?Math.floor((c-l)/d*8):Math.floor((l-s)/d*8))}function b(t){console.log("in pointer up");var o=p(t),s=document.getElementById("board-".concat(e.playerColor));"mouse"===n&&(s.removeEventListener("mousemove",f,!1),s.removeEventListener("mouseup",b,!1)),"touch"===n&&(s.removeEventListener("touchmove",f,!1),s.removeEventListener("touchend",b,!1));var c=document.getElementById("".concat(e.playerColor,"-").concat(r,"-piece-image"));if(e.Board.turn===e.playerColor||e.rotateColor)if(r||0===r)if(i.includes(o)){var a=e.Board.getPieceByPosition(r),l=L(a,e.Board).find((function(e){return e.targetPosition===o}));if(l){x(),c.style.display="none";setTimeout((function(){c.style=null}),200);P(l)}else c.style=null,x()}else c.style=null;else c.style=null}}return Object(i.useEffect)((function(){s(null),u([])}),[e.Board]),Object(v.jsxs)("div",{className:e.rotateColor?e.firstBoard===h.WHITE?"game-container":"game-reverse-container":e.playerColor===h.WHITE?e.Board.turn===h.WHITE?"game-container game-container-to-move":"game-container":e.Board.turn===h.BLACK?"game-reverse-container game-container-to-move":"game-reverse-container",id:"board-".concat(e.playerColor),onTouchStart:function(e){return w(e,"touch")},onMouseDown:function(e){return w(e,"mouse")},children:[e.Board.isGameOver?Object(v.jsx)(R,{Board:e.Board}):"",Object(v.jsx)(B,{playerColor:e.playerColor,Board:e.Board}),d.map((function(t,n){return Object(v.jsx)(y,{rotateColor:e.rotateColor,selectedField:o,setSelectedField:s,selectedFieldPossibleTargets:l,setSelectedFieldPossibleTargets:u,fieldNumber:n,move:e.move,playerColor:e.playerColor,Board:e.Board,isKingInDanger:j&&g===n})}))]})};n(84);var D=function(e){return Object(v.jsx)("div",{className:"graveyard-container",children:e.Board.graveyardPieces.filter((function(t){return t.color!==e.playerColor})).sort((function(e,t){switch(console.log(e.type),e.type){default:return 0;case b.PAWN:switch(t.type){default:case b.PAWN:return 0;case b.KNIGHT:case b.BISHOP:case b.ROOK:case b.QUEEN:return-1}case b.KNIGHT:switch(t.type){default:case b.PAWN:return 1;case b.KNIGHT:return 0;case b.BISHOP:case b.ROOK:case b.QUEEN:return-1}case b.BISHOP:switch(t.type){default:case b.PAWN:case b.KNIGHT:return 1;case b.BISHOP:return 0;case b.ROOK:case b.QUEEN:return-1}case b.ROOK:switch(t.type){default:case b.PAWN:case b.KNIGHT:case b.BISHOP:return 1;case b.ROOK:return 0;case b.QUEEN:return-1}case b.QUEEN:switch(t.type){default:case b.PAWN:case b.KNIGHT:case b.BISHOP:case b.ROOK:return 1;case b.QUEEN:return 0}}})).map((function(e,t){return Object(v.jsx)("div",{className:"graveyard-item",children:m(e.type,e.color)},t)}))})};var q=function(e){return G(e).filter((function(t){return F(t,e)}))};var J=function(e){return 0===q(e).length};var X=function(e,t){t.piece.copy().move(t.targetPosition);var n=e.copy(),i=Q(n.Board,t);return i.isGameOver=J(i),n.Board=i,n.BoardHistory.push(e.Board),n},Y=(n(85),n(61)),V=n.n(Y),Z=n(62),$=n.n(Z);var _=function(e){return Object(v.jsx)("div",{className:"status-container",children:e.Board.turn?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"vertical-status-item",children:[Object(v.jsx)("span",{children:"Turn:"}),Object(v.jsx)("span",{children:e.Board.turn===h.WHITE?"White":"Black"})]}),Object(v.jsxs)("div",{className:"vertical-status-item",children:[Object(v.jsx)("span",{children:"Round: "}),Object(v.jsx)("span",{children:e.Board.round?e.Board.round:0})]}),Object(v.jsxs)("div",{className:"horizontal-status-item",children:[e.Board.gameOver?"":Object(v.jsx)("span",{className:"icon",title:"undo move",children:Object(v.jsx)(V.a,{style:{height:"40px",width:"40px"},onClick:e.undoMove})}),Object(v.jsx)("span",{children:e.setShowSettingsOverlay?Object(v.jsx)($.a,{title:"Settings",style:{height:"40px",width:"40px"},onClick:function(t){return e.setShowSettingsOverlay(!0)}}):""})]})]}):Object(v.jsx)("div",{className:"vertical-status-item",children:Object(v.jsx)("span",{children:"Waiting for opponent"})})})},ee=function(){function e(t,n,i){Object(N.a)(this,e),this.Board=t,this.BoardHistory=n||[],this.winner=i||null}return Object(I.a)(e,[{key:"copy",value:function(){return new e(this.Board.copy(),this.BoardHistory.map((function(e){return e.copy()})),this.winner)}}]),e}(),te=function(){function e(t,n,i,o,s,r){Object(N.a)(this,e),this.activePieces=t,this.graveyardPieces=n,this.turn=i,this.round=o,this.lastMovedPiece=s,this.isGameOver=r}return Object(I.a)(e,[{key:"getPieceByPosition",value:function(e){var t=new E("position",e,C.EQUAL),n=new H([t]).filter(this.activePieces);return n.length>0?n[0]:null}},{key:"getKing",value:function(e){var t=new E("type",b.KING,C.EQUAL),n=new E("color",e,C.EQUAL),i=new H([t,n]).filter(this.activePieces);return i.length>0?i[0]:null}},{key:"getTurn",value:function(){return this.turn}},{key:"switchTurn",value:function(){this.turn===h.WHITE?this.turn=h.BLACK:this.turn=h.WHITE}},{key:"copy",value:function(){return new e(this.activePieces.map((function(e){return e.copy()})),this.graveyardPieces.map((function(e){return e.copy()})),this.turn,this.round,this.lastMovedPiece,this.isGameOver)}},{key:"copyWithExchangedPieces",value:function(e){var t,n=this.copy(),i=e.map((function(e){return new E("id",e.id,C.UNEQUAL)})),o=new H(i);return n.activePieces=o.filter(n.activePieces),(t=n.activePieces).push.apply(t,Object(w.a)(e)),n}},{key:"removePiece",value:function(e){var t=new E("id",e.id,C.UNEQUAL),n=new H([t]);this.activePieces=n.filter(this.activePieces)}}]),e}(),ne=function(){function e(t,n,i,o,s,r){Object(N.a)(this,e),this.color=n,this.type=t,this.position=o,this.id=s,this.hasMoved=i,this.lastPosition=r}return Object(I.a)(e,[{key:"move",value:function(e){this.lastPosition=this.position,this.position=e,this.hasMoved=!0}},{key:"isPawn",value:function(){return this.type===b.PAWN}},{key:"isBishop",value:function(){return this.type===b.BISHOP}},{key:"isKnight",value:function(){return this.type===b.KNIGHT}},{key:"isQueen",value:function(){return this.type===b.QUEEN}},{key:"isKing",value:function(){return this.type===b.KING}},{key:"isRook",value:function(){return this.type===b.ROOK}},{key:"isWhite",value:function(){return this.color===h.WHITE}},{key:"isBlack",value:function(){return this.color===h.BLACK}},{key:"getPosition",value:function(){return this.position}},{key:"setPosition",value:function(e){this.position=e}},{key:"getID",value:function(){return this.id}},{key:"copy",value:function(){return new e(this.type,this.color,this.hasMoved,this.position,this.id,this.lastPosition)}}]),e}();var ie=function(){for(var e=[],t=0,n=0;t<8;t++)e.push(new ne(b.PAWN,h.WHITE,!1,8+t,n,null)),n+=1;for(var i=0;i<2;i++)e.push(new ne(b.KNIGHT,h.WHITE,!1,1+5*i,n,null)),n+=1;for(var o=0;o<2;o++)e.push(new ne(b.BISHOP,h.WHITE,!1,2+3*o,n,null)),n+=1;for(var s=0;s<2;s++)e.push(new ne(b.ROOK,h.WHITE,!1,0+7*s,n,null)),n+=1;e.push(new ne(b.QUEEN,h.WHITE,!1,3,n,null)),n+=1,e.push(new ne(b.KING,h.WHITE,!1,4,n,null)),n+=1;for(var r=0;r<8;r++)e.push(new ne(b.PAWN,h.BLACK,!1,48+r,n,null)),n+=1;for(var c=0;c<2;c++)e.push(new ne(b.KNIGHT,h.BLACK,!1,57+5*c,n,null)),n+=1;for(var a=0;a<2;a++)e.push(new ne(b.BISHOP,h.BLACK,!1,58+3*a,n,null)),n+=1;for(var l=0;l<2;l++)e.push(new ne(b.ROOK,h.BLACK,!1,56+7*l,n,null)),n+=1;e.push(new ne(b.QUEEN,h.BLACK,!1,59,n,null)),n+=1,e.push(new ne(b.KING,h.BLACK,!1,60,n,null));var u=new te(e,[],h.WHITE,0,!1,null);return new ee(u,[])};var oe=function(e){if(e.Board.round>0){var t=e.copy();return t.Board=t.BoardHistory.pop(),t}};var se=function(e){var t=Object(i.useState)([]),n=Object(a.a)(t,2),o=(n[0],n[1],Object(i.useState)([])),s=Object(a.a)(o,2),r=(s[0],s[1],Object(i.useState)(h.WHITE)),c=Object(a.a)(r,2),l=c[0],u=c[1],d=Object(i.useState)(!1),g=Object(a.a)(d,2),f=(g[0],g[1],Object(i.useState)(!1)),p=Object(a.a)(f,2),b=p[0],O=p[1],P=Object(i.useState)([]),m=Object(a.a)(P,2),y=(m[0],m[1],Object(i.useState)([])),B=Object(a.a)(y,2),x=(B[0],B[1],Object(i.useState)(0)),w=Object(a.a)(x,2),N=(w[0],w[1],Object(i.useState)([])),E=Object(a.a)(N,2),C=(E[0],E[1],Object(i.useState)(h.WHITE)),I=Object(a.a)(C,2),H=(I[0],I[1],Object(i.useState)(null)),W=Object(a.a)(H,2),T=(W[0],W[1],Object(i.useState)(!0)),K=Object(a.a)(T,2),M=K[0],k=K[1],S=Object(i.useState)(null),A=Object(a.a)(S,2),L=(A[0],A[1],Object(i.useState)({})),G=Object(a.a)(L,2),U=G[0],R=G[1];function Q(e){var t=X(U,e);R(t)}return window.innerWidth,Object(i.useEffect)((function(){console.log(U.Board?U.Board.graveyardPieces:"")}),[U]),Object(v.jsxs)(v.Fragment,{children:[M?Object(v.jsx)(j,{screenWidth:e.screenWidth,screenHeight:e.screenHeigh,initGame:function(){var e=ie();console.log(e),R(e),O(!0),k(!1)},Board:U.Board,showSettingsOverlay:M,setShowSettingsOverlay:k,firstBoard:l,toggleFirstBoard:function(){l===h.WHITE?u(h.BLACK):u(h.WHITE)}}):"",Object(v.jsx)("div",{className:"status-display-container",children:Object(v.jsx)(_,{Board:b?U.Board:{},undoMove:function(){var e=oe(U);e&&R(e)},setShowSettingsOverlay:k})}),b?e.screenWidth>1e3?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"splitscreen-games-container",children:l===h.WHITE?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"splitscreen-game-container",children:Object(v.jsx)(z,{playerColor:h.WHITE,Board:U.Board,move:Q})}),Object(v.jsx)("div",{className:"splitscreen-game-container",children:Object(v.jsx)(z,{playerColor:h.BLACK,Board:U.Board,move:Q})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"splitscreen-game-container",children:Object(v.jsx)(z,{playerColor:h.BLACK,Board:U.Board,move:Q})}),Object(v.jsx)("div",{className:"splitscreen-game-container",children:Object(v.jsx)(z,{playerColor:h.WHITE,Board:U.Board,move:Q})})]})}),Object(v.jsx)("div",{className:"splitscreen-graveyards-container",children:l===h.WHITE?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D,{playerColor:h.WHITE,Board:U.Board}),Object(v.jsx)(D,{playerColor:h.BLACK,Board:U.Board})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(D,{playerColor:h.BLACK,Board:U.Board}),Object(v.jsx)(D,{playerColor:h.WHITE,Board:U.Board})]})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"mobile-offline-graveyard-container-first",children:Object(v.jsx)(D,{Board:U.Board,rotateColor:l===h.WHITE?h.BLACK:h.WHITE,playerColor:l===h.WHITE?h.BLACK:h.WHITE})}),Object(v.jsx)("div",{className:"mobile-offline-game-container",children:Object(v.jsx)(z,{playerColor:l,rotateColor:l===h.WHITE?h.BLACK:h.WHITE,firstBoard:l,Board:U.Board,move:Q})}),Object(v.jsx)("div",{className:"mobile-offline-graveyard-container-second",children:Object(v.jsx)(D,{Board:U.Board,rotateColor:l===h.WHITE?h.BLACK:h.WHITE,playerColor:l})})]}):""]})},re=n(63),ce=n.n(re);n(116);var ae=function(e){return Object(v.jsx)("div",{className:"undo-move-overlay",children:Object(v.jsxs)("div",{className:"undo-move-container",children:[Object(v.jsx)("div",{children:" Player X wants to undo the move "}),Object(v.jsxs)("div",{className:"buttons-container",children:[Object(v.jsx)("button",{onClick:e.acceptUndoMove,children:"accept"}),Object(v.jsx)("button",{onClick:e.denyUndoMove,children:"reject "})]})]})})};var le=function(e){return new ne(e.type,e.color,e.hasMoved,e.position,e.id,e.lastPosition)};var ue=function(e){var t=e.activePieces.map((function(e){return le(e)})),n=e.graveyardPieces.map((function(e){return le(e)})),i=e.turn,o=e.round,s=e.lastMovedPiece?le(e.lastMovedPiece):null,r=e.isGameOver;return new te(t,n,i,o,s,r)},de=(n(117),n(118),n(40)),he=n.n(de);var ve=function(e){var t=window.location.href;return Object(v.jsxs)("div",{className:"ready-to-share-body",children:[Object(v.jsx)("div",{className:"ready-to-share-description",children:"Your game has been created, share the link with the person you want to play with"}),Object(v.jsx)("button",{className:"ready-to-share-container",onClick:function(){navigator.clipboard.writeText(window.location.href)},children:e.screenWidth>1e3?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:t}),Object(v.jsx)("span",{children:Object(v.jsx)(he.a,{})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("span",{children:"Click to copy the URL"}),Object(v.jsx)("span",{children:Object(v.jsx)(he.a,{})})]})})]})};n(119);var je=function(e){return Object(v.jsx)("div",{className:"other-player-left-body",children:Object(v.jsx)("span",{children:"The other player left the game"})})},ge=(n(120),function(){return Object(v.jsx)("div",{className:"waiting-overlay",children:Object(v.jsx)("div",{className:"waiting-container",children:"Waiting for your oppenent to accept your request"})})});var fe=function(e){var t=e.match.params.id,n=Object(i.useState)(null),o=Object(a.a)(n,2),s=o[0],r=o[1],c=Object(i.useState)({}),l=Object(a.a)(c,2),u=l[0],d=l[1],j=Object(i.useState)(null),g=Object(a.a)(j,2),f=g[0],p=g[1],b=Object(i.useState)(!1),O=Object(a.a)(b,2),P=O[0],m=O[1],y=Object(i.useState)(null),B=Object(a.a)(y,2),x=B[0],w=B[1],N=Object(i.useState)(!1),E=Object(a.a)(N,2),C=E[0],I=E[1],H=Object(i.useState)(null),W=Object(a.a)(H,2),T=(W[0],W[1]),K=Object(i.useState)(e.hasCreatedGame),M=Object(a.a)(K,2),k=M[0],S=M[1],A=Object(i.useState)(!1),L=Object(a.a)(A,2),G=L[0],U=L[1],R=Object(i.useState)(!1),Q=Object(a.a)(R,2),F=Q[0],q=Q[1],J=Object(i.useState)(!1),X=Object(a.a)(J,2),Y=X[0],V=X[1],Z=Object(i.useState)(!1),$=Object(a.a)(Z,2),ee=$[0],te=$[1];function ne(e){console.log(e),s.emit("makeMove",t,JSON.stringify(e))}return Object(i.useEffect)((function(){r(null),q(!1),p(null),m(!1),I(!1),w(null),V(!1),te(!1),d({})}),[e.match.params.id]),Object(i.useEffect)((function(){Y||r(ce()("https://splitscreen-chess.herokuapp.com")),f||(d({}),p(null))}),[t,Y]),Object(i.useEffect)((function(){if(s)return Y||s.emit("joingame",t,x),s.on("joinedGame",(function(e,t,n){T(!0),p(e),w(t),V(!0),S(n),console.log("joined game")})),s.on("roomIsFull",(function(){U(!0)})),s.on("gameChanged",(function(e){var t=ue(JSON.parse(JSON.stringify(e)));m(!1),I(!1),d(t)})),s.on("gameReady",(function(){q(!0)})),s.on("undoMoveRequest",(function(){m(!0)})),s.on("disconnect",(function(){console.log("disconnecting"),q(!1),V(!1)})),s.on("otherPlayerLeft",(function(){q(!1),te(!0)})),function(){return s.disconnect()}}),[s]),Object(v.jsxs)(v.Fragment,{children:[P?Object(v.jsx)(ae,{acceptUndoMove:function(){s.emit("acceptUndoMove",t)},denyUndoMove:function(){s.emit("denyUndoMove",t)},setShowUndoOverlay:m}):"",C?Object(v.jsx)(ge,{}):"",Object(v.jsx)("div",{className:"status-display-container",children:Object(v.jsx)(_,{Board:u,undoMove:function(){u.round>0&&(s.emit("undoMoveRequest",t),I(!0))}})}),Y?F?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("div",{className:"games-online-container",children:f&&u.activePieces?(h.WHITE,Object(v.jsx)(z,{screenWidth:e.screenWidth,screenHeight:e.screenHeight,playerColor:f,Board:u,move:ne})):""}),f&&u.graveyardPieces?Object(v.jsx)("div",{className:"graveyards-container",children:Object(v.jsx)(D,{screenWidth:e.screenWidth,screenHeight:e.screenHeight,playerColor:f,Board:u})}):""]}):k?ee?Object(v.jsx)(je,{}):Object(v.jsx)(ve,{screenWidth:e.screenWidth,screenHeight:e.screenHeight}):Object(v.jsx)(je,{}):G?"Game is Full":"game doesn't exist anymore"]})};n(121),URL="/splitscreen-chess-frontend";var pe=function(e){var t=0===e.showNavigationMenu?"navigation-menu-body navigation-menu-body-default":e.showNavigationMenu%2===0?"navigation-menu-body navigation-menu-body-inactive":"navigation-menu-body navigation-menu-body-active";return Object(v.jsx)("div",{className:t,onClick:function(e){return e.stopPropagation()},children:Object(v.jsx)("div",{className:"navigation-menu-list",children:Object(v.jsxs)("ul",{children:[Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{onClick:e.toggleShowNavigationMenu,to:"/",children:Object(v.jsx)("span",{children:"Home"})})}),Object(v.jsx)("li",{children:Object(v.jsx)(o.b,{onClick:e.toggleShowNavigationMenu,to:"/Splitscreen",children:Object(v.jsx)("span",{children:"Splitscreen"})})}),Object(v.jsx)("li",{children:Object(v.jsx)("a",{onClick:function(t){e.createNewGame(),e.toggleShowNavigationMenu(t)},children:Object(v.jsx)("span",{children:"New online game"})})})]})})})};n(123);var be=function(e){var t=0===e.showNavigationMenu?"navigation-button navigation-button-default":e.showNavigationMenu%2===0?"navigation-button navigation-button-inactive":"navigation-button navigation-button-active";return Object(v.jsxs)("button",{className:t,onClick:function(t){return e.toggleShowNavigationMenu(t)},children:[Object(v.jsx)("div",{id:"top-bar"}),Object(v.jsx)("div",{id:"mid-bar"}),Object(v.jsx)("div",{id:"bottom-bar"})]})};n(124);var Oe=function(e){var t=Object(l.e)();return Object(v.jsxs)("div",{className:"home-component-body",children:[Object(v.jsx)("div",{className:"image-container",children:Object(v.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"3 3 40 40",children:[Object(v.jsxs)("defs",{children:[Object(v.jsxs)("linearGradient",{id:"splitGradient",gradientTransform:"rotate(15)",children:[Object(v.jsx)("stop",{offset:"0%",stopColor:"#52658f"}),Object(v.jsxs)("stop",{offset:"65%",stopColor:"#52658f",children:[Object(v.jsx)("animate",{attributeName:"stopColor",values:"#e8e8e8; #52658f",dur:"2s",begin:"0s"}),Object(v.jsx)("animate",{attributeName:"offset",values:"-1; 0.65",dur:"2s",begin:"0s"})]}),Object(v.jsxs)("stop",{offset:"65%",stopColor:"#f7f5e6",children:[Object(v.jsx)("animate",{attributeName:"stopColor",values:"#e8e8e8; #f7f5e6",dur:"2s",begin:"0s"}),Object(v.jsx)("animate",{attributeName:"offset",values:"2; 0.65",dur:"2s",begin:"0s"})]}),Object(v.jsx)("stop",{offset:"100%",stopColor:"#f7f5e6"})]}),Object(v.jsxs)("linearGradient",{id:"onlineGradient",children:[Object(v.jsx)("stop",{offset:"0%",stopColor:"#52658f",children:Object(v.jsx)("animate",{attributeName:"stopColor",values:"#f7f5e6; #52658f",dur:"1.5s",begin:"0.5s"})}),Object(v.jsx)("stop",{offset:"100%",stopColor:"#52658f"})]})]}),Object(v.jsx)("g",{children:Object(v.jsx)("path",{className:"animated-knight-init",id:"animated-knight",d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 24.38,18 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10"})})]})}),Object(v.jsxs)("div",{className:"nav-container",children:[Object(v.jsx)("button",{id:"online-game-button",onClick:function(t){e.createNewGame()},children:"Online"}),Object(v.jsx)("button",{onClick:function(e){t.push("/splitscreen")},children:"Splitscreen"})]})]})};var Pe=function(){var e=Object(l.e)(),t=Object(i.useState)(0),n=Object(a.a)(t,2),o=n[0],s=n[1],r=Object(i.useState)(window.innerWidth),u=Object(a.a)(r,2),d=u[0],h=u[1],j=Object(i.useState)(window.innerHeight),g=Object(a.a)(j,2),f=g[0],p=g[1];function b(){fetch("".concat("https://splitscreen-chess.herokuapp.com","/newgame"),{method:"GET"}).then((function(e){return e.json()})).then((function(t){e.push("/online/".concat(t.gameID))})).catch((function(e){return console.log(e)}))}function O(e){e.stopPropagation(),s(0===o?1:1===o?2:1)}return Object(i.useEffect)((function(){h(window.innerWidth),p(window.innerHeight);var e=function(){h(window.innerWidth),p(window.innerHeight)};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),Object(v.jsxs)("header",{className:"App",onClick:function(e){1===o&&O(e)},children:[Object(v.jsx)(be,{screenWidth:d,screenHeight:f,showNavigationMenu:o,toggleShowNavigationMenu:O}),Object(v.jsx)(pe,{screenWidth:d,screenHeight:f,showNavigationMenu:o,createNewGame:b,toggleShowNavigationMenu:O}),Object(v.jsx)(l.a,{exact:!0,path:"/",render:function(){return Object(v.jsx)(Oe,{createNewGame:b})}}),Object(v.jsx)(l.a,{path:"/Splitscreen",render:function(){return Object(v.jsx)(se,{screenWidth:d,screenHeight:f})}}),Object(v.jsx)(l.a,{path:"/online/:id",render:function(e){return Object(v.jsx)(fe,Object(c.a)(Object(c.a)({},e),{},{screenWidth:d,screenHeight:f}),window.location.pathname)}})]})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,137)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),s(e),r(e)}))};r.a.render(Object(v.jsx)(o.a,{basename:"/splitscreen-chess-frontend",children:Object(v.jsx)(Pe,{})}),document.getElementById("root")),me()},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.0898a632.chunk.js.map